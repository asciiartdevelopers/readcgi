(written in euc-jp-unix) -*-text-*-
$Id: TODO,v 1.6 2001/08/30 14:12:51 2ch Exp $

・思いついたことを掻く。
・荒らし厳禁(ｗ
・フォーマットは任意。

				- * -

TAGSは不要かな? 他に要るという人がいなければリポジトリから削除するです。
(6411)

もうみんな知ってるとは思うけど、
M-x c-set-style linux
のスタイルが、現行のソースにいちばん合ってると
おもう。ちなみに漏れのデフォルトは gnu (鬱
(6411)

板ダイジェストには、板毎ヘッドラインの差込が必要だな…
(6411)

				- * -

【部分取得とLast-Modifiedについて】

現在、Last-Modified(以降L-M)は、.datから取得しているが、chunk取得して
いる現状にそぐわないと考える。ただ、現状では、ファイルをナメてから
L-Mを求めるのは難しそうなので…どうしよう。

(6411)

				- * -

【板ダイジェストとLast-Modifiedについて】

現在の実装では、/board/subject.txt のmtimeを返しているが、subject.txt 
はsage進行の時は更新されないと思われるので、上位n個スレでsage進行が行
われているとき、正しいものが取れなくなる可能性はある。

本来ありぬべき動作は、最新10スレのmtimeのうち、最新のものを返す
べきである。

(6411)

				- * -

【後始末に関して】

ちょっと行儀悪いんだけど、グローバルヒープはいちいちfree()すると、効率
悪いと思う。対話型でも常駐サービスでもないCGIは、資源の開放はみーんな
カーネルに任せてしまってもいいんではないか? と漏れ的には思う。ちなみに
プロセス終了時、malloc()した空間をfree()してるわけではない。brkした部
分を関知せず、プロセスごと捨ててるハズ。

殊にmunmap(2)は、PTEの解放を伴うため、TLBがフラッシュされる。プロセス
実行中にこれを行うのは、SMPシステムの場合は決して軽い処理ではない。な
ので、mmap(2)した領域は放ったらかしにしてるのだ。

気持ち悪いとは思うんだが、速やかに処理を終えるべきCGIと割り切って、な
るべく積極的に後始末をサボりたいんだが、どうだろう? って話題はちょっと
前にprog板にスレ立ってたような気もしたーり。

(6411)

				- * -

/*
 *  どーでもいーんですが、Cソース中、
 *  read2ch.hだけEUCですな(藁
 *  ソースのdiff取るときにちょっと悲しいことが起きてしまう。
 *  どうしよ。個人的には全部EUCにできるなら
 *  したいところではある。(6411)
 */

連絡先

6411 mailto:webmaster@psychedance.com
